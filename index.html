<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PEMETAAN PROFIL POLA PIKIR</title>
<style>
  body {font-family: Arial, sans-serif; background:#e6f0fa; margin:0; padding:20px;}
  .container {max-width:900px; margin:auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.15);}
  h1 {text-align:center; color:#2563eb;}

  .form-group {margin-bottom:15px;}
  .form-group label {display:block; font-weight:bold; margin-bottom:5px;}
  .form-group input {
    width:95%; padding:10px; border:1px solid #ccc; border-radius:6px;
    box-shadow:inset 1px 1px 3px #bbb; font-size:15px;
  }

  .q {margin-bottom:15px; padding:15px; border:1px solid #ddd; border-radius:8px; background:#f9fbff;}
  .opt {display:grid; grid-template-columns: repeat(4, 1fr); gap:6px; margin-top:8px;}
  .opt label {
    background:#f0f4ff; padding:6px; border-radius:8px; border:1px solid #ccc;
    cursor:pointer; box-shadow:0 4px #999; text-align:center;
    font-weight:bold; font-size:11px; transition:all 0.15s ease;
    display:flex; align-items:center; justify-content:center; gap:6px;
  }
  .opt input[type=radio] {width:14px; height:14px; accent-color:#2563eb;}
  .opt input:checked + span {color:#2563eb; font-weight:bold; animation:bounce 0.2s;}
  @keyframes bounce {0%{transform:scale(1);} 50%{transform:scale(0.85);} 100%{transform:scale(1);}}

  button {display:inline-block; padding:10px 14px; border:none; border-radius:6px; cursor:pointer;
    margin:10px 5px; font-weight:bold; transition:all 0.2s ease; box-shadow:0 4px #999;}
  button:active {transform:translateY(2px); box-shadow:0 2px #666;}
  .primary {background:#2563eb; color:#fff;}
  .soft {background:#f0f0f0; color:#333;}

  .result {margin-top:20px; padding:15px; border:1px dashed #888; border-radius:8px; display:none; text-align:center;}
  .score {font-size:4em; font-weight:bold; font-family:"Georgia",serif; color:#2563eb; display:inline-block; margin-right:20px;}
  .badge {display:inline-block; font-size:2em; vertical-align:middle; font-weight:bold; padding:6px 20px; border-radius:10px;}
  .badge.F{background:#fee2e2;color:#b91c1c;} 
  .badge.FG{background:#fef3c7;color:#92400e;} 
  .badge.GF{background:#e0f2fe;color:#0369a1;} 
  .badge.G{background:#dcfce7;color:#166534;}

  .share-section {text-align:center; margin-top:30px;}
  .share-section input {width:90%; margin-bottom:20px; padding:10px; text-align:center;}
  #qrcode {margin:20px 0;}
</style>
</head>
<body>
<div class="container">
  <h1>PEMETAAN PROFIL POLA PIKIR</h1>
  <p><b>Keterangan Opsi:</b> SS = Sangat Setuju | S = Setuju | TS = Tidak Setuju | STS = Sangat Tidak Setuju</p>

  <div class="form-group">
    <label>NAMA RESPONDEN:</label>
    <input type="text" id="nama" placeholder="Tuliskan nama Anda">
  </div>
  <div class="form-group">
    <label>INSTANSI / LEMBAGA:</label>
    <input type="text" id="instansi" placeholder="Tuliskan instansi/lembaga Anda">
  </div>
  <div class="form-group">
    <label>BIDANG / MAPEL:</label>
    <input type="text" id="mapel" placeholder="Tuliskan bidang atau mapel Anda">
  </div>

  <form id="quiz"></form>

  <div style="text-align:center;">
    <button type="button" class="primary" id="submitBtn">SUBMIT</button>
    <button type="button" class="soft" id="resetBtn">RESET</button>
    <button type="button" class="soft" id="analisisBtn">ANALISIS</button>
  </div>

  <div id="result" class="result"></div>

  <div class="share-section">
    <h3>Bagikan Link</h3>
    <input type="text" id="shareUrl" readonly>
    <div id="qrcode"></div>
    <button type="button" class="soft" id="downloadQR">Unduh QR</button>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
const statements=[
 "Kemampuan Anda adalah sesuatu yang sangat mendasar yang tidak banyak dapat Anda ubah lagi.",
 "Tidak peduli seberapapun tingkat kemampuan Anda saat ini, Anda bisa mengubahnya walaupun sedikit.",
 "Anda akan selalu dapat mengubah kemampuan Anda.",
 "Anda adalah seseorang yang unik, tidak banyak yang dapat dilakukan untuk mengubahnya.",
 "Anda akan selalu dapat mengubah diri Anda sendiri.",
 "Kemampuan dalam bidang seni dan musik dapat dipelajari oleh siapapun.",
 "Hanya sedikit orang yang benar-benar mahir dalam olahraga, Anda harus membawa bakat ini sejak lahir.",
 "Matematika lebih mudah dipelajari oleh pria atau seseorang yang berada dalam lingkungan yang menyukainya.",
 "Makin keras Anda mengerjakan sesuatu makin mahir Anda dalam hal ini.",
 "Tidak peduli tipe apapun Anda saat ini, Anda akan selalu dapat mengubahnya.",
 "Mencoba sesuatu yang baru akan sangat menyulitkan Anda sehingga Anda ingin menghindarinya.",
 "Sebagian orang baik dan pintar, sebagian lagi tidak. Tidak banyak yang dapat berubah.",
 "Saya sangat menghargai kritik dan saran dari siapapun juga terkait dengan kinerja saya saat ini.",
 "Saya kurang senang bila ada kritik dan saran dari orang lain.",
 "Semua orang yang tanpa cacat-otak atau cacat-lahir memiliki kemampuan yang sama dalam belajar.",
 "Anda bisa mempelajari sesuatu yang baru, tapi Anda tidak bisa mengubah kemampuan Anda.",
 "Anda dapat melakukan sesuatu secara berbeda, tapi sebenarnya Anda tetap tidak dapat mengubah kemampuan Anda.",
 "Semua orang pada dasarnya baik, tapi kadang-kadang membuat keputusan yang salah.",
 "Alasan terpenting mengapa Anda melakukan pekerjaan Anda adalah keinginan untuk mempelajari sesuatu yang baru.",
 "Orang yang benar-benar cerdas, tidak perlu bekerja keras."
];
const labels=["SS","S","TS","STS"];
const scoring=[
 [0,1,2,3],[3,2,1,0],[3,2,1,0],[0,1,2,3],[3,2,1,0],
 [3,2,1,0],[0,1,2,3],[0,1,2,3],[3,2,1,0],[3,2,1,0],
 [0,1,2,3],[0,1,2,3],[3,2,1,0],[0,1,2,3],[3,2,1,0],
 [0,1,2,3],[0,1,2,3],[3,2,1,0],[3,2,1,0],[0,1,2,3]
];

function renderQuestions(){
  const form=document.getElementById("quiz");
  form.innerHTML="";
  statements.forEach((t,i)=>{
    const q=document.createElement("div");
    q.className="q";
    q.innerHTML=`
      <p><b>${i+1}.</b> ${t}</p>
      <div class="opt">
        ${labels.map((lab,j)=>`
          <label>
            <input type="radio" name="q${i}" value="${j}">
            <span>${lab}</span>
          </label>
        `).join("")}
      </div>
    `;
    form.appendChild(q);
  });
}
document.addEventListener("DOMContentLoaded",()=>{
  renderQuestions();
  const url=window.location.href;
  document.getElementById("shareUrl").value=url;
  new QRCode(document.getElementById("qrcode"),{text:url,width:150,height:150});
});

document.getElementById("downloadQR").onclick=()=>{
  const canvas=document.querySelector("#qrcode canvas");
  const link=document.createElement("a");
  link.href=canvas.toDataURL("image/png");
  link.download="QRCode.png";
  link.click();
};

function compute(){
  let tot=0; let answers=[];
  for(let i=0;i<statements.length;i++){
    const sel=document.querySelector(`input[name="q${i}"]:checked`);
    if(!sel) return null;
    const sc=scoring[i][parseInt(sel.value)];
    tot+=sc;
    answers.push({q:statements[i],opt:labels[sel.value],score:sc});
  }
  let cat=""; if(tot<=20) cat="F"; else if(tot<=33) cat="FG"; else if(tot<=44) cat="GF"; else cat="G";
  return {total:tot,category:cat,answers};
}

function showResult(r){
  const res=document.getElementById("result");
  res.style.display="block";
  const labelsFull={F:"F - Fixed Mindset",FG:"FG - Fixed to Growth",GF:"GF - Growth to Fixed",G:"G - Growth Mindset"};
  res.innerHTML=`<span class="score">${r.total}</span> <span class="badge ${r.category}">${labelsFull[r.category]}</span>`;
}

function showAnalysis(r){
  let newWin=window.open("","_blank");
  let html=`<html><head><title>Analisis</title>
  <style>
    body{font-family:Arial,sans-serif; padding:15px; line-height:1.3;}
    h2{text-align:center;color:#2563eb;margin-bottom:10px;}
    .header-table{width:100%; border-collapse:collapse; margin-bottom:8px;}
    .header-table td{font-size:13px; padding:4px 6px; vertical-align:top;}
    .header-table .label{text-align:right; font-weight:bold; width:120px;}
    table{width:100%; border-collapse:collapse; font-size:13px;}
    th,td{padding:4px 6px; border-bottom:1px solid #ddd; text-align:left; vertical-align:top;}
    tr:nth-child(even){background:#f9f9f9;} tr:hover{background:#eef6ff;}
    th{background:#2563eb;color:white;}
    .btn-print{margin-top:10px; display:block; padding:8px; background:#2563eb; color:#fff; border:none; border-radius:6px; cursor:pointer; font-weight:bold;}
    @media print{.btn-print{display:none;} body{margin:0;} @page{margin:1cm;}}
  </style>
  </head><body>
  <h2>Analisis Pemetaan Profil Pola Pikir</h2>
  <table class="header-table">
    <tr>
      <td class="label">Nama</td><td>: ${document.getElementById("nama").value}</td>
      <td style="font-weight:bold;">Total:</td><td>${r.total}</td>
      <td style="font-weight:bold;">Kategori:</td><td>${r.category}</td>
    </tr>
    <tr>
      <td class="label">Instansi</td><td>: ${document.getElementById("instansi").value}</td>
      <td style="font-weight:bold;">Interpretasi:</td>
      <td colspan="3">${
        r.category=="G"?"Growth Mindset sangat baik":
        r.category=="GF"?"Cenderung Growth, masih ada area tetap":
        r.category=="FG"?"Cenderung Fixed, mulai terbuka":
        "Cenderung Fixed Mindset"
      }</td>
    </tr>
    <tr>
      <td class="label">Bidang/Mapel</td><td>: ${document.getElementById("mapel").value}</td>
      <td style="font-weight:bold;">Motivasi:</td>
      <td colspan="3">Kemampuan selalu bisa ditingkatkan dengan usaha & keterbukaan.</td>
    </tr>
  </table>
  <table>
    <tr><th>Pernyataan</th><th>Jawaban</th><th>Analisis & Tindak Lanjut</th></tr>`;
  
  r.answers.forEach(a=>{
    let deskripsi="";
    if(a.score>=3) deskripsi="Respon Anda menunjukkan pola pikir berkembang yang kuat. Pertahankan dengan terus membuka diri pada tantangan baru.";
    else if(a.score==2) deskripsi="Anda cukup terbuka, namun masih ada ruang untuk memperkuat keyakinan akan potensi diri.";
    else if(a.score==1) deskripsi="Respon Anda mengindikasikan keraguan. Disarankan berlatih refleksi diri dan menerima umpan balik.";
    else deskripsi="Ada kecenderungan pola pikir tetap. Perlu kesadaran bahwa kemampuan dapat ditingkatkan melalui usaha konsisten.";
    html+=`<tr><td>${a.q}</td><td>${a.opt}</td><td>${deskripsi}</td></tr>`;
  });
  
  html+=`</table>
  <button class="btn-print" onclick="window.print()">Cetak / Simpan PDF</button>
  </body></html>`;
  newWin.document.write(html);
  newWin.document.close();
}

document.getElementById("submitBtn").onclick=()=>{const r=compute(); if(!r){alert("Lengkapi semua pertanyaan!"); return;} showResult(r);};
document.getElementById("analisisBtn").onclick=()=>{const r=compute(); if(!r){alert("Lengkapi semua pertanyaan!"); return;} showAnalysis(r);};
document.getElementById("resetBtn").onclick=()=>{location.reload();};
</script>
</body>
</html>
